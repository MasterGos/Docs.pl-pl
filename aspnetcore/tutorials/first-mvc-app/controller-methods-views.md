---
title: Metody kontrolera i widoki w programie ASP.NET Core
author: rick-anderson
description: Dowiedz się, jak pracować z metody kontrolera, widoków i DataAnnotations w programie ASP.NET Core.
ms.author: riande
ms.date: 12/13/2018
uid: tutorials/first-mvc-app/controller-methods-views
ms.openlocfilehash: e6bdaec6dfe681582a54bd39ce1c76bebe6f5fb2
ms.sourcegitcommit: e1cc4c1ef6c9e07918a609d5ad7fadcb6abe3e12
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/03/2019
ms.locfileid: "53997256"
---
# <a name="controller-methods-and-views-in-aspnet-core"></a><span data-ttu-id="2af8a-103">Metody kontrolera i widoki w programie ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="2af8a-103">Controller methods and views in ASP.NET Core</span></span>

<span data-ttu-id="2af8a-104">Przez [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="2af8a-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="2af8a-105">Mamy dobry początek aplikacji filmu, ale prezentacji nie jest najlepszym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="2af8a-105">We have a good start to the movie app, but the presentation isn't ideal.</span></span> <span data-ttu-id="2af8a-106">Nie chcemy wyświetlić czas (12:00:00 AM na ilustracji poniżej) i **ReleaseDate** powinna być dwa słowa.</span><span class="sxs-lookup"><span data-stu-id="2af8a-106">We don't want to see the time (12:00:00 AM in the image below) and **ReleaseDate** should be two words.</span></span>

![Widok indeksu: Data wydania jest jedno słowo (bez spacji) i każdy film Data wydania zawiera godzinę 12: 00](working-with-sql/_static/m55.png)

<span data-ttu-id="2af8a-108">Otwórz *Models/Movie.cs* pliku i Dodaj wyróżnione wiersze, które przedstawiono poniżej:</span><span class="sxs-lookup"><span data-stu-id="2af8a-108">Open the *Models/Movie.cs* file and add the highlighted lines shown below:</span></span>

[!code-csharp[](start-mvc/sample/MvcMovie22/Models/MovieDateFixed.cs?name=snippet_1&highlight=2,3,12-13,17)]

<span data-ttu-id="2af8a-109">Omówione [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) w następnym samouczku.</span><span class="sxs-lookup"><span data-stu-id="2af8a-109">We cover [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) in the next tutorial.</span></span> <span data-ttu-id="2af8a-110">[Wyświetlić](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) atrybut określa, co będzie wyświetlone nazwy pola (w tym przypadku "Data wydania" zamiast "ReleaseDate").</span><span class="sxs-lookup"><span data-stu-id="2af8a-110">The [Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) attribute specifies what to display for the name of a field (in this case "Release Date" instead of "ReleaseDate").</span></span> <span data-ttu-id="2af8a-111">[DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) atrybut określa typ danych (Data), co nie jest wyświetlane informacje o godzinie, w tym polu.</span><span class="sxs-lookup"><span data-stu-id="2af8a-111">The [DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) attribute specifies the type of the data (Date), so the time information stored in the field isn't displayed.</span></span>

<span data-ttu-id="2af8a-112">`[Column(TypeName = "decimal(18, 2)")]` Wymagana jest adnotacja danych, dzięki czemu można poprawnie mapowane na platformy Entity Framework Core `Price` walutę w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="2af8a-112">The `[Column(TypeName = "decimal(18, 2)")]` data annotation is required so Entity Framework Core can correctly map `Price` to currency in the database.</span></span> <span data-ttu-id="2af8a-113">Aby uzyskać więcej informacji, zobacz [typy danych](/ef/core/modeling/relational/data-types).</span><span class="sxs-lookup"><span data-stu-id="2af8a-113">For more information, see [Data Types](/ef/core/modeling/relational/data-types).</span></span>

<span data-ttu-id="2af8a-114">Przejdź do `Movies` kontrolera i przytrzymasz wskaźnik myszy **Edytuj** link, aby wyświetlić docelowy adres URL.</span><span class="sxs-lookup"><span data-stu-id="2af8a-114">Browse to the `Movies` controller and hold the mouse pointer over an **Edit** link to see the target URL.</span></span>

![Okno przeglądarki z myszy nad łącze edycji i łącze adres Url https://localhost:5001/Movies/Edit/5 jest wyświetlany](~/tutorials/first-mvc-app/controller-methods-views/_static/edit7.png)

<span data-ttu-id="2af8a-116">**Edytuj**, **szczegóły**, i **Usuń** łącza są generowane przez Pomocnik tagu kotwicy MVC Core, w *Views/Movies/Index.cshtml* pliku.</span><span class="sxs-lookup"><span data-stu-id="2af8a-116">The **Edit**, **Details**, and **Delete** links are generated by the Core MVC Anchor Tag Helper in the *Views/Movies/Index.cshtml* file.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/IndexOriginal.cshtml?highlight=1-3&range=46-50)]

<span data-ttu-id="2af8a-117">[Pomocnicy tagów](xref:mvc/views/tag-helpers/intro) umożliwiają uczestniczenie kodu po stronie serwera w tworzeniu i renderowaniu elementów HTML w plikach Razor.</span><span class="sxs-lookup"><span data-stu-id="2af8a-117">[Tag Helpers](xref:mvc/views/tag-helpers/intro) enable server-side code to participate in creating and rendering HTML elements in Razor files.</span></span> <span data-ttu-id="2af8a-118">W powyższym kodzie `AnchorTagHelper` dynamicznie generuje kod HTML `href` wartość atrybutu z id metody i wyznaczać trasy akcji kontrolera. Możesz użyć **Wyświetl źródło** ze swojej ulubionej przeglądarce lub użyj narzędzia dla deweloperów do sprawdzenia wygenerowany kod znaczników.</span><span class="sxs-lookup"><span data-stu-id="2af8a-118">In the code above, the `AnchorTagHelper` dynamically generates the HTML `href` attribute value from the controller action method and route id. You use **View Source** from your favorite browser or use the developer tools to examine the generated markup.</span></span> <span data-ttu-id="2af8a-119">Poniżej przedstawiono część wygenerowanego kodu HTML:</span><span class="sxs-lookup"><span data-stu-id="2af8a-119">A portion of the generated HTML is shown below:</span></span>

```html
 <td>
    <a href="/Movies/Edit/4"> Edit </a> |
    <a href="/Movies/Details/4"> Details </a> |
    <a href="/Movies/Delete/4"> Delete </a>
</td>
```

<span data-ttu-id="2af8a-120">Odwołaj format [routingu](xref:mvc/controllers/routing) w *Startup.cs* pliku:</span><span class="sxs-lookup"><span data-stu-id="2af8a-120">Recall the format for [routing](xref:mvc/controllers/routing) set in the *Startup.cs* file:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="2af8a-121">Tłumaczy platformy ASP.NET Core `https://localhost:5001/Movies/Edit/4` na żądanie, aby `Edit` metody akcji `Movies` kontroler z parametrem `Id` 4.</span><span class="sxs-lookup"><span data-stu-id="2af8a-121">ASP.NET Core translates `https://localhost:5001/Movies/Edit/4` into a request to the `Edit` action method of the `Movies` controller with the parameter `Id` of 4.</span></span> <span data-ttu-id="2af8a-122">(Metody kontrolera są również znane jako metody akcji).</span><span class="sxs-lookup"><span data-stu-id="2af8a-122">(Controller methods are also known as action methods.)</span></span>

<span data-ttu-id="2af8a-123">[Pomocników tagów](xref:mvc/views/tag-helpers/intro) są jednymi z najbardziej popularnych nowe funkcje w programie ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="2af8a-123">[Tag Helpers](xref:mvc/views/tag-helpers/intro) are one of the most popular new features in ASP.NET Core.</span></span> <span data-ttu-id="2af8a-124">Aby uzyskać więcej informacji, zobacz [dodatkowe zasoby](#additional-resources).</span><span class="sxs-lookup"><span data-stu-id="2af8a-124">For more information, see [Additional resources](#additional-resources).</span></span>

<span data-ttu-id="2af8a-125">Otwórz `Movies` kontrolera i zbadaj dwa `Edit` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="2af8a-125">Open the `Movies` controller and examine the two `Edit` action methods.</span></span> <span data-ttu-id="2af8a-126">Poniższy kod przedstawia `HTTP GET Edit` metody, która pobiera film i wypełnia formularz edycji generowane przez *Edit.cshtml* pliku Razor.</span><span class="sxs-lookup"><span data-stu-id="2af8a-126">The following code shows the `HTTP GET Edit` method, which fetches the movie and populates the edit form generated by the *Edit.cshtml* Razor file.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="2af8a-127">Poniższy kod przedstawia `HTTP POST Edit` metody, która przetwarza wartości przesłanych film:</span><span class="sxs-lookup"><span data-stu-id="2af8a-127">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="2af8a-128">Poniższy kod przedstawia `HTTP POST Edit` metody, która przetwarza wartości przesłanych film:</span><span class="sxs-lookup"><span data-stu-id="2af8a-128">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

<span data-ttu-id="2af8a-129">`[Bind]` Atrybut jest jednym ze sposobów, aby zapewnić ochronę przed [polegającymi](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span><span class="sxs-lookup"><span data-stu-id="2af8a-129">The `[Bind]` attribute is one way to protect against [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span></span> <span data-ttu-id="2af8a-130">Powinien zawierać tylko właściwości w `[Bind]` atrybut, który chcesz zmienić.</span><span class="sxs-lookup"><span data-stu-id="2af8a-130">You should only include properties in the `[Bind]` attribute that you want to change.</span></span> <span data-ttu-id="2af8a-131">Aby uzyskać więcej informacji, zobacz [chronić kontroler z nadmiernego księgowania](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application).</span><span class="sxs-lookup"><span data-stu-id="2af8a-131">For more information, see [Protect your controller from over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application).</span></span> <span data-ttu-id="2af8a-132">[Modele widoków](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) zawierają alternatywne podejście, aby uniknąć nadmiernego ogłaszania.</span><span class="sxs-lookup"><span data-stu-id="2af8a-132">[ViewModels](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) provide an alternative approach to prevent over-posting.</span></span>

<span data-ttu-id="2af8a-133">Zwróć uwagę, drugi `Edit` metody akcji jest poprzedzony `[HttpPost]` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="2af8a-133">Notice the second `Edit` action method is preceded by the `[HttpPost]` attribute.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2&highlight=1)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2&highlight=4)]

::: moniker-end

<span data-ttu-id="2af8a-134">`HttpPost` Atrybut określa, że to `Edit` może być wywołana metoda *tylko* dla `POST` żądań.</span><span class="sxs-lookup"><span data-stu-id="2af8a-134">The `HttpPost` attribute specifies that this `Edit` method can be invoked *only* for `POST` requests.</span></span> <span data-ttu-id="2af8a-135">Można zastosować `[HttpGet]` atrybutu do pierwszego Edytuj metodę, ale nie jest konieczne ponieważ `[HttpGet]` jest ustawieniem domyślnym.</span><span class="sxs-lookup"><span data-stu-id="2af8a-135">You could apply the `[HttpGet]` attribute to the first edit method, but that's not necessary because `[HttpGet]` is the default.</span></span>

<span data-ttu-id="2af8a-136">`ValidateAntiForgeryToken` Atrybut jest używany do [zapobiegania fałszowaniu żądania](xref:security/anti-request-forgery) i parę przy użyciu tokenu zabezpieczającego przed sfałszowaniem generowane w pliku widoku edycji (*Views/Movies/Edit.cshtml*).</span><span class="sxs-lookup"><span data-stu-id="2af8a-136">The `ValidateAntiForgeryToken` attribute is used to [prevent forgery of a request](xref:security/anti-request-forgery) and is paired up with an anti-forgery token generated in the edit view file (*Views/Movies/Edit.cshtml*).</span></span> <span data-ttu-id="2af8a-137">Edytuj plik widoku generuje token zabezpieczający przed sfałszowaniem z [Pomocnik tagu formularza](xref:mvc/views/working-with-forms).</span><span class="sxs-lookup"><span data-stu-id="2af8a-137">The edit view file generates the anti-forgery token with the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/Edit.cshtml?range=9)]

<span data-ttu-id="2af8a-138">[Pomocnik tagu formularza](xref:mvc/views/working-with-forms) generuje ukryte token zabezpieczający przed sfałszowaniem, które muszą być zgodne `[ValidateAntiForgeryToken]` wygenerowany token zabezpieczający przed sfałszowaniem w `Edit` metody kontrolera filmów.</span><span class="sxs-lookup"><span data-stu-id="2af8a-138">The [Form Tag Helper](xref:mvc/views/working-with-forms) generates a hidden anti-forgery token that must match the `[ValidateAntiForgeryToken]` generated anti-forgery token in the `Edit` method of the Movies controller.</span></span> <span data-ttu-id="2af8a-139">Aby uzyskać więcej informacji, zobacz [ochrona przed fałszerstwem żądań](xref:security/anti-request-forgery).</span><span class="sxs-lookup"><span data-stu-id="2af8a-139">For more information, see [Anti-Request Forgery](xref:security/anti-request-forgery).</span></span>

<span data-ttu-id="2af8a-140">`HttpGet Edit` Metoda przyjmuje filmu `ID` parametru wyszukuje filmu używający narzędzia Entity Framework `SingleOrDefaultAsync` metodę i zwraca wybrany film do widoku edycji.</span><span class="sxs-lookup"><span data-stu-id="2af8a-140">The `HttpGet Edit` method takes the movie `ID` parameter, looks up the movie using the Entity Framework `SingleOrDefaultAsync` method, and returns the selected movie to the Edit view.</span></span> <span data-ttu-id="2af8a-141">Jeśli nie można odnaleźć filmu, `NotFound` (HTTP 404) jest zwracany.</span><span class="sxs-lookup"><span data-stu-id="2af8a-141">If a movie cannot be found, `NotFound` (HTTP 404) is returned.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="2af8a-142">Podczas tworzenia widoku edycji system scaffoldingu zbadane `Movie` klasy i utworzony kod do renderowania `<label>` i `<input>` elementy dla każdej właściwości klasy.</span><span class="sxs-lookup"><span data-stu-id="2af8a-142">When the scaffolding system created the Edit view, it examined the `Movie` class and created code to render `<label>` and `<input>` elements for each property of the class.</span></span> <span data-ttu-id="2af8a-143">Poniższy przykład przedstawia widok edycji, który został wygenerowany przez system scaffoldingu programu Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="2af8a-143">The following example shows the Edit view that was generated by the Visual Studio scaffolding system:</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie22/Views/Movies/EditOriginal.cshtml)]

<span data-ttu-id="2af8a-144">Zwróć uwagę, jak szablon widoku ma `@model MvcMovie.Models.Movie` instrukcji w górnej części pliku.</span><span class="sxs-lookup"><span data-stu-id="2af8a-144">Notice how the view template has a `@model MvcMovie.Models.Movie` statement at the top of the file.</span></span> <span data-ttu-id="2af8a-145">`@model MvcMovie.Models.Movie` Określa, czy widok oczekuje modelu dla widoku szablonu typu `Movie`.</span><span class="sxs-lookup"><span data-stu-id="2af8a-145">`@model MvcMovie.Models.Movie` specifies that the view expects the model for the view template to be of type `Movie`.</span></span>

<span data-ttu-id="2af8a-146">Utworzony szkielet kodu używa kilka metod pomocniczych znaczników uprościć kod znaczników HTML.</span><span class="sxs-lookup"><span data-stu-id="2af8a-146">The scaffolded code uses several Tag Helper methods to streamline the HTML markup.</span></span> <span data-ttu-id="2af8a-147">[Pomocnik tagu etykiet](xref:mvc/views/working-with-forms) Wyświetla nazwę pola ("Title", "ReleaseDate", "Gatunku" lub "Price").</span><span class="sxs-lookup"><span data-stu-id="2af8a-147">The - [Label Tag Helper](xref:mvc/views/working-with-forms) displays the name of the field ("Title", "ReleaseDate", "Genre", or "Price").</span></span> <span data-ttu-id="2af8a-148">[Pomocnik tagu dane wejściowe](xref:mvc/views/working-with-forms) renderowanie kodu HTML `<input>` elementu.</span><span class="sxs-lookup"><span data-stu-id="2af8a-148">The [Input Tag Helper](xref:mvc/views/working-with-forms) renders an HTML `<input>` element.</span></span> <span data-ttu-id="2af8a-149">[Pomocnik tagu weryfikacji](xref:mvc/views/working-with-forms) wyświetla komunikaty weryfikacji skojarzony z tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="2af8a-149">The [Validation Tag Helper](xref:mvc/views/working-with-forms) displays any validation messages associated with that property.</span></span>

<span data-ttu-id="2af8a-150">Uruchom aplikację, a następnie przejdź do `/Movies` adresu URL.</span><span class="sxs-lookup"><span data-stu-id="2af8a-150">Run the application and navigate to the `/Movies` URL.</span></span> <span data-ttu-id="2af8a-151">Kliknij przycisk **Edytuj** łącza.</span><span class="sxs-lookup"><span data-stu-id="2af8a-151">Click an **Edit** link.</span></span> <span data-ttu-id="2af8a-152">W przeglądarce Wyświetl źródło strony.</span><span class="sxs-lookup"><span data-stu-id="2af8a-152">In the browser, view the source for the page.</span></span> <span data-ttu-id="2af8a-153">Wygenerowany kod HTML dla `<form>` element znajdują się poniżej.</span><span class="sxs-lookup"><span data-stu-id="2af8a-153">The generated HTML for the `<form>` element is shown below.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Shared/edit_view_source.html?highlight=1,6,10,17,24,28)]

<span data-ttu-id="2af8a-154">`<input>` Elementy znajdują się w `HTML <form>` elementu którego `action` ma ustawioną wartość atrybutu Opublikuj `/Movies/Edit/id` adresu URL.</span><span class="sxs-lookup"><span data-stu-id="2af8a-154">The `<input>` elements are in an `HTML <form>` element whose `action` attribute is set to post to the `/Movies/Edit/id` URL.</span></span> <span data-ttu-id="2af8a-155">Dane formularza zostaną opublikowane na serwerze po `Save` przycisku.</span><span class="sxs-lookup"><span data-stu-id="2af8a-155">The form data will be posted to the server when the `Save` button is clicked.</span></span> <span data-ttu-id="2af8a-156">Ostatni wiersz przed tagiem zamykającym `</form>` element pokazuje ukryte [XSRF](xref:security/anti-request-forgery) token generowane przez [Pomocnik tagu formularza](xref:mvc/views/working-with-forms).</span><span class="sxs-lookup"><span data-stu-id="2af8a-156">The last line before the closing `</form>` element shows the hidden [XSRF](xref:security/anti-request-forgery) token generated by the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

## <a name="processing-the-post-request"></a><span data-ttu-id="2af8a-157">Przetwarzanie żądania POST</span><span class="sxs-lookup"><span data-stu-id="2af8a-157">Processing the POST Request</span></span>

<span data-ttu-id="2af8a-158">Poniższej przedstawiono listę `[HttpPost]` wersję `Edit` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="2af8a-158">The following listing shows the `[HttpPost]` version of the `Edit` action method.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

<span data-ttu-id="2af8a-159">`[ValidateAntiForgeryToken]` Atrybut weryfikuje ukryte [XSRF](xref:security/anti-request-forgery) token wygenerowany przez generator tokenów zabezpieczających przed sfałszowaniem w [Pomocnik tagu formularza](xref:mvc/views/working-with-forms)</span><span class="sxs-lookup"><span data-stu-id="2af8a-159">The `[ValidateAntiForgeryToken]` attribute validates the hidden [XSRF](xref:security/anti-request-forgery) token generated by the anti-forgery token generator in the [Form Tag Helper](xref:mvc/views/working-with-forms)</span></span>

<span data-ttu-id="2af8a-160">[Wiązanie modelu](xref:mvc/models/model-binding) systemu przyjmuje wartości przesłanego formularza i tworzy `Movie` obiektu, który jest przekazywany jako `movie` parametru.</span><span class="sxs-lookup"><span data-stu-id="2af8a-160">The [model binding](xref:mvc/models/model-binding) system takes the posted form values and creates a `Movie` object that's passed as the `movie` parameter.</span></span> <span data-ttu-id="2af8a-161">`ModelState.IsValid` Metoda sprawdza, czy dane dostarczone w formie może służyć do modyfikowania (edycji lub aktualizacja) `Movie` obiektu.</span><span class="sxs-lookup"><span data-stu-id="2af8a-161">The `ModelState.IsValid` method verifies that the data submitted in the form can be used to modify (edit or update) a `Movie` object.</span></span> <span data-ttu-id="2af8a-162">Jeśli dane są prawidłowe, są zapisywane.</span><span class="sxs-lookup"><span data-stu-id="2af8a-162">If the data is valid, it's saved.</span></span> <span data-ttu-id="2af8a-163">Dane zaktualizowane movie (edytowanych) są zapisywane w bazie danych przez wywołanie metody `SaveChangesAsync` metoda kontekst bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2af8a-163">The updated (edited) movie data is saved to the database by calling the `SaveChangesAsync` method of database context.</span></span> <span data-ttu-id="2af8a-164">Po zapisaniu danych, kod przekierowuje użytkownika do `Index` metody akcji `MoviesController` klasy, która wyświetla kolekcji film, w tym zmiany wprowadzone przed chwilą.</span><span class="sxs-lookup"><span data-stu-id="2af8a-164">After saving the data, the code redirects the user to the `Index` action method of the `MoviesController` class, which displays the movie collection, including the changes just made.</span></span>

<span data-ttu-id="2af8a-165">Zanim opublikowania formularza z serwerem, weryfikacji po stronie klienta sprawdza reguł sprawdzania poprawności w polach.</span><span class="sxs-lookup"><span data-stu-id="2af8a-165">Before the form is posted to the server, client-side validation checks any validation rules on the fields.</span></span> <span data-ttu-id="2af8a-166">Jeśli występują błędy sprawdzania poprawności, jest wyświetlany komunikat o błędzie i formularza nie jest opublikowane.</span><span class="sxs-lookup"><span data-stu-id="2af8a-166">If there are any validation errors, an error message is displayed and the form isn't posted.</span></span> <span data-ttu-id="2af8a-167">Obsługa języka JavaScript jest wyłączona, nie będziesz mieć weryfikacji po stronie klienta, ale serwer wykryje opublikowanych wartości, które nie są prawidłowe i wartości formularza zostanie wyświetlony ponownie, z komunikatów o błędach.</span><span class="sxs-lookup"><span data-stu-id="2af8a-167">If JavaScript is disabled, you won't have client-side validation but the server will detect the posted values that are not valid, and the form values will be redisplayed with error messages.</span></span> <span data-ttu-id="2af8a-168">W dalszej części tego samouczka omówiony [sprawdzania poprawności modelu](xref:mvc/models/validation) bardziej szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="2af8a-168">Later in the tutorial we examine [Model Validation](xref:mvc/models/validation) in more detail.</span></span> <span data-ttu-id="2af8a-169">[Pomocnik tagu weryfikacji](xref:mvc/views/working-with-forms) w *Views/Movies/Edit.cshtml* Wyświetl szablon dba o wyświetlaniu odpowiedniego komunikatu o błędzie.</span><span class="sxs-lookup"><span data-stu-id="2af8a-169">The [Validation Tag Helper](xref:mvc/views/working-with-forms) in the *Views/Movies/Edit.cshtml* view template takes care of displaying appropriate error messages.</span></span>

![Edytuj widok: Wyjątek dla nieprawidłowej wartości cen ABC, informacja o tym, że pola Cena musi być liczbą.](~/tutorials/first-mvc-app/controller-methods-views/_static/val.png)

<span data-ttu-id="2af8a-172">Wszystkie `HttpGet` metodami w kontrolerze filmu wykonaj podobny wzorzec.</span><span class="sxs-lookup"><span data-stu-id="2af8a-172">All the `HttpGet` methods in the movie controller follow a similar pattern.</span></span> <span data-ttu-id="2af8a-173">Staną się obiekt filmu (lub listę obiektów, w przypadku `Index`) i przekazać obiekt (model) do widoku.</span><span class="sxs-lookup"><span data-stu-id="2af8a-173">They get a movie object (or list of objects, in the case of `Index`), and pass the object (model) to the view.</span></span> <span data-ttu-id="2af8a-174">`Create` Metoda przekazuje obiekt pusty filmu w taki sposób, aby `Create` widoku.</span><span class="sxs-lookup"><span data-stu-id="2af8a-174">The `Create` method passes an empty movie object to the `Create` view.</span></span> <span data-ttu-id="2af8a-175">Wszystkie metody, które tworzenie, edytowanie, usuwanie lub inny sposób modyfikować danych, należy więc w `[HttpPost]` przeciążenia metody.</span><span class="sxs-lookup"><span data-stu-id="2af8a-175">All the methods that create, edit, delete, or otherwise modify data do so in the `[HttpPost]` overload of the method.</span></span> <span data-ttu-id="2af8a-176">Modyfikowanie danych w `HTTP GET` metoda stanowi zagrożenie bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="2af8a-176">Modifying data in an `HTTP GET` method is a security risk.</span></span> <span data-ttu-id="2af8a-177">Modyfikowanie danych w `HTTP GET` metoda również narusza HTTP najlepszych rozwiązań i architektury [REST](http://rest.elkstein.org/) wzorca, który określa, że żądania GET nie powinno się zmieniać stan aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2af8a-177">Modifying data in an `HTTP GET` method also violates HTTP best practices and the architectural [REST](http://rest.elkstein.org/) pattern, which specifies that GET requests shouldn't change the state of your application.</span></span> <span data-ttu-id="2af8a-178">Innymi słowy wykonywanie operacji GET powinna być bezpieczne operacji, która ma żadnych efektów ubocznych i nie modyfikuje utrwalonych danych.</span><span class="sxs-lookup"><span data-stu-id="2af8a-178">In other words, performing a GET operation should be a safe operation that has no side effects and doesn't modify your persisted data.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="2af8a-179">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="2af8a-179">Additional resources</span></span>

* [<span data-ttu-id="2af8a-180">Globalizacja i lokalizacja</span><span class="sxs-lookup"><span data-stu-id="2af8a-180">Globalization and localization</span></span>](xref:fundamentals/localization)
* [<span data-ttu-id="2af8a-181">Wprowadzenie do pomocnicy tagów</span><span class="sxs-lookup"><span data-stu-id="2af8a-181">Introduction to Tag Helpers</span></span>](xref:mvc/views/tag-helpers/intro)
* [<span data-ttu-id="2af8a-182">Tworzenie pomocników tagów</span><span class="sxs-lookup"><span data-stu-id="2af8a-182">Author Tag Helpers</span></span>](xref:mvc/views/tag-helpers/authoring)
* [<span data-ttu-id="2af8a-183">Ochrona przed fałszerstwem żądań</span><span class="sxs-lookup"><span data-stu-id="2af8a-183">Anti-Request Forgery</span></span>](xref:security/anti-request-forgery)
* <span data-ttu-id="2af8a-184">Chroń swoje kontroler z [polegającymi](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span><span class="sxs-lookup"><span data-stu-id="2af8a-184">Protect your controller from [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span></span>
* [<span data-ttu-id="2af8a-185">Modele widoków</span><span class="sxs-lookup"><span data-stu-id="2af8a-185">ViewModels</span></span>](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/)
* [<span data-ttu-id="2af8a-186">Pomocnik tagu formularza</span><span class="sxs-lookup"><span data-stu-id="2af8a-186">Form Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="2af8a-187">Pomocnik tagu wejściowego</span><span class="sxs-lookup"><span data-stu-id="2af8a-187">Input Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="2af8a-188">Pomocnik tagu etykiety</span><span class="sxs-lookup"><span data-stu-id="2af8a-188">Label Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="2af8a-189">Pomocnik tagu wyboru</span><span class="sxs-lookup"><span data-stu-id="2af8a-189">Select Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="2af8a-190">Pomocnik tagu sprawdzania poprawności</span><span class="sxs-lookup"><span data-stu-id="2af8a-190">Validation Tag Helper</span></span>](xref:mvc/views/working-with-forms)

> [!div class="step-by-step"]
> <span data-ttu-id="2af8a-191">[Poprzednie](working-with-sql.md)
> [dalej](search.md)</span><span class="sxs-lookup"><span data-stu-id="2af8a-191">[Previous](working-with-sql.md)
[Next](search.md)</span></span>  
